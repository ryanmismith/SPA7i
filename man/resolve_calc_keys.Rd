% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/resolve_calc_keys.R
\name{resolve_calc_keys}
\alias{resolve_calc_keys}
\title{Resolve calculation keys with township precedence (vectorized)}
\usage{
resolve_calc_keys(unit, township, default_unit = "AW")
}
\arguments{
\item{unit}{character vector; may be NA/invalid. Expected values among "RY","AE","AW","SP".}

\item{township}{character vector; original labels (kept for spatial/reporting).}

\item{default_unit}{single string fallback if no valid township or unit (default "AW").}
}
\value{
A tibble with columns:
\itemize{
  \item \code{unit_input}: normalized (uppercased) `unit` input.
  \item \code{township_input}: original `township` (trimmed) for spatial/reporting.
  \item \code{calc_unit}: resolved unit for modeling/valuation.
  \item \code{township_for_calc}: resolved township key for modeling/valuation.
}
}
\description{
Decision order per row:
1) If `township` is in one of the allowed lists, use that township for calcs and set `calc_unit`
   from the list it belongs to.
2) Else, if provided `unit` is valid (one of "RY","AE","AW","SP"), set
   `calc_unit = unit` and `township_for_calc = unit`.
3) Else, default to `calc_unit = "AW"` and `township_for_calc = "AW"`.
}
\details{
Original inputs are preserved for reporting (see return columns).
}
\examples{
# Township recognized (belongs to AW list)
resolve_calc_keys("AW", "T9R11")

# Township unrecognized; valid unit provided -> fallback to unit
resolve_calc_keys("RY", "BogusTown")

# Neither township nor unit valid -> AW/AW
resolve_calc_keys(NA, "BogusTown")

# Township recognized in AE list (calc uses AE + the exact township)
resolve_calc_keys(NA, "T10R10")

}
